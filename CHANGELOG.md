# 更新日志

[English](CHANGELOG_EN.md) | 中文

## v1.6.7

- 修复了手持装备相关参数（如 `LeftHandEquip`、`RightHandEquip` 等）在某些情况下不会正确更新的问题
- 修复了部分 Animator 参数（如 `GunState`、`WeaponInLocator`）不会显示在参数窗口中的问题，现在所有定义的参数都会正确显示

## v1.6.6

- 新增 `GunState` Animator 参数，用于指示枪械的当前状态（射击冷却、就绪、开火、连发每发冷却、空弹、装弹中）

## v1.6.5

- 修复了 纸箱定位点 和 搬运定位点 的工作逻辑

## v1.6.4

- 新增 `WeaponInLocator` Animator 参数，用于指示武器当前所在的定位点类型（左手、右手或近战武器）

## v1.6.3

- 模型增加了 `DeathLootBoxPrefabPath` 字段，用于指定死亡战利品箱的样式（可选，默认为原版模型）
- 现在允许自定义死亡战利品箱的模型了

## v1.6.2

- 取消了对玩家角色的 idle 音频功能限制，现在玩家也可以启用自动音频了
- 增加了对每个目标角色的 idle 音频功能设置，现在可以对每个目标单独设置是否允许自动音频和自动音频间隔了
- 重构了模型管理器的 UI 界面，提升用户舒适度和界面美观度与结构化

## v1.6.1

- 新增待机音频自动播放功能，支持为非玩家角色（AI 角色和宠物）配置待机音频自动播放间隔
- 新增 idle 音效标签支持，模型音效可配置 "idle" 标签用于待机音频播放

## v1.6.0

- 优化了部分逻辑处理
- 新增纸箱定位点支持，自定义模型可包含 `PaperBoxLocator` 定位点，纸箱会自动附加到该定位点并跟随模型
- 现在隐藏装备时不再会导致纸箱被隐藏了
- 新增可搬运物品定位点支持，自定义模型可包含 `CarriableLocator` 定位点，搬运物品时会自动附加并保存原始位置信息

## v1.5.1-fix2

- 修正了重新加载模型时音频设置没有正确应用的问题

## v1.5.1-fix1

- 修正了选择模型时界面没有刷新的问题

## v1.5.1

- 新增 `AICharacter` 目标，用于非玩家和宠物的 AI 角色（暂不支持NPC，因为 NPC 实际是建筑的一部分，并非常规模型结构）
- 新增一键重置无效模型设置的按钮，用于将使用了不兼容、不存在的模型的角色快速重置回默认模型
- 新增音频播放相关接口，支持替换玩家嘎嘎和 AI 的自动嘎嘎

## v1.4.1

- 新增大量 Animator 参数支持，增强动画控制能力
- 新增枪械相关参数：`Loaded`（装弹状态）、`Shoot`（射击触发）、`ShootMode`（射击模式）、`AmmoRate`（弹药比率）
- 新增瞄准相关参数：`InAds`（瞄准状态）、`AdsValue`（瞄准进度）、`AimType`（瞄准类型）、`AimDirX/Y/Z`（瞄准方向）
- 新增动作相关参数：`ActionRunning`（动作执行状态）、`ActionProgress`（动作进度）、`ActionPriority`（动作优先级）
- 新增状态相关参数：`Hidden`（隐藏状态）、`ThermalOn`（热成像状态）、`VelocityX/Y/Z`（速度分量）
- 优化了部分代码逻辑和性能
- 增加了 Animator 参数窗口，可以实时查看支持的 Animator 参数数值

## v1.2.0

- 重构配置系统：
  - `UsingModel.json` 改为字典格式
  - 增加 `HideEquipmentConfig.json` 并将相关配置从 `UIConfig.json` 移除
  - 支持自动迁移旧配置
- 性能优化：实现增量更新机制，使用运行时哈希缓存，只在 Bundle 文件或配置变更时重新加载
- 多对象支持：每个 ModelTarget 可对应多个游戏对象，切换模型时统一应用到所有对象
- 刷新流程优化：无变更时跳过 Bundle 加载和状态检查，避免无意义的重复加载
- 临时模型恢复：Bundle 更新时自动临时切换回原版模型，更新完成后自动恢复
- 用户选择保护：刷新过程中用户更改模型时，不会覆盖用户的选择
- UI 改进：模型信息显示 Bundle 名称
- 修复刷新时模型重复加载的问题

## v1.1.2

- 优化了部分逻辑
- 增加了 `CurrentCharacterType` 参数，用于判断当前生效于玩家角色（0）还是宠物（1）

